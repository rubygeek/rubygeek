{"version":3,"file":"common_router_providers.js","sourceRoot":"","sources":["../../../../modules/@angular/router/src/common_router_providers.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Location, LocationStrategy, PathLocationStrategy} from '@angular/common';\nimport {ANALYZE_FOR_ENTRY_COMPONENTS, APP_BOOTSTRAP_LISTENER, APP_INITIALIZER, ApplicationRef, ComponentResolver, Injector, NgModuleFactoryLoader, OpaqueToken, SystemJsNgModuleLoader} from '@angular/core';\n\nimport {Route, Routes} from './config';\nimport {Router} from './router';\nimport {ROUTER_CONFIG, ROUTES} from './router_config_loader';\nimport {RouterOutletMap} from './router_outlet_map';\nimport {ActivatedRoute} from './router_state';\nimport {DefaultUrlSerializer, UrlSerializer} from './url_tree';\nimport {flatten} from './utils/collection';\n\nexport const ROUTER_CONFIGURATION = new OpaqueToken('ROUTER_CONFIGURATION');\n\n/**\n * @experimental\n */\nexport interface ExtraOptions {\n  enableTracing?: boolean;\n  useHash?: boolean;\n}\n\nexport function setupRouter(\n    ref: ApplicationRef, resolver: ComponentResolver, urlSerializer: UrlSerializer,\n    outletMap: RouterOutletMap, location: Location, injector: Injector,\n    loader: NgModuleFactoryLoader, config: Route[][], opts: ExtraOptions = {}) {\n  if (ref.componentTypes.length == 0) {\n    throw new Error('Bootstrap at least one component before injecting Router.');\n  }\n  const componentType = ref.componentTypes[0];\n  const r = new Router(\n      componentType, resolver, urlSerializer, outletMap, location, injector, loader,\n      flatten(config));\n\n  if (opts.enableTracing) {\n    r.events.subscribe(e => {\n      console.group(`Router Event: ${(<any>e.constructor).name}`);\n      console.log(e.toString());\n      console.log(e);\n      console.groupEnd();\n    });\n  }\n\n  return r;\n}\n\nexport function rootRoute(router: Router): ActivatedRoute {\n  return router.routerState.root;\n}\n\nexport function initialRouterNavigation(router: Router) {\n  return () => { router.initialNavigation(); };\n}\n\n/**\n * An array of {@link Provider}s. To use the router, you must add this to your application.\n *\n * ### Example\n *\n * ```\n * @Component({directives: [ROUTER_DIRECTIVES]})\n * class AppCmp {\n *   // ...\n * }\n *\n * const config = [\n *   {path: 'home', component: Home}\n * ];\n *\n * bootstrap(AppCmp, [provideRouter(config)]);\n * ```\n *\n * @deprecated use RouterModule instead\n */\nexport function provideRouter(routes: Routes, config: ExtraOptions = {}): any[] {\n  return [\n    provideRoutes(routes),\n\n    {provide: ROUTER_CONFIGURATION, useValue: config}, Location,\n    {provide: LocationStrategy, useClass: PathLocationStrategy},\n    {provide: UrlSerializer, useClass: DefaultUrlSerializer},\n\n    {\n      provide: Router,\n      useFactory: setupRouter,\n      deps: [\n        ApplicationRef, ComponentResolver, UrlSerializer, RouterOutletMap, Location, Injector,\n        NgModuleFactoryLoader, ROUTES, ROUTER_CONFIGURATION\n      ]\n    },\n\n    RouterOutletMap, {provide: ActivatedRoute, useFactory: rootRoute, deps: [Router]},\n\n    // Trigger initial navigation\n    provideRouterInitializer(), {provide: NgModuleFactoryLoader, useClass: SystemJsNgModuleLoader}\n  ];\n}\n\nexport function provideRouterInitializer() {\n  return {\n    provide: APP_BOOTSTRAP_LISTENER,\n    multi: true,\n    useFactory: initialRouterNavigation,\n    deps: [Router]\n  };\n}\n\n/**\n * Router configuration.\n *\n * ### Example\n *\n * ```\n * @NgModule({providers: [\n *   provideRoutes([{path: 'home', component: Home}])\n * ]})\n * class LazyLoadedModule {\n *   // ...\n * }\n * ```\n *\n * @deprecated\n */\nexport function provideRoutes(routes: Routes): any {\n  return [\n    {provide: ANALYZE_FOR_ENTRY_COMPONENTS, multi: true, useValue: routes},\n    {provide: ROUTES, multi: true, useValue: routes}\n  ];\n}\n\n/**\n * Router configuration.\n *\n * ### Example\n *\n * ```\n * @NgModule({providers: [\n *   provideRouterOptions({enableTracing: true})\n * ]})\n * class LazyLoadedModule {\n *   // ...\n * }\n * ```\n *\n * @deprecated\n */\nexport function provideRouterConfig(config: ExtraOptions): any {\n  return {provide: ROUTER_CONFIGURATION, useValue: config};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}