{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../modules/@angular/platform-browser-dynamic/index.ts"],"names":[],"mappings":"AAAA;;;;;;GAMG;;AAEH,yBAAsF,mBAAmB,CAAC,CAAA;AAC1G,qBAA2Y,eAAe,CAAC,CAAA;AAC3Z,iCAA6K,2BAA2B,CAAC,CAAA;AAEzM,6BAAsB,gBAAgB,CAAC,CAAA;AAEvC,mCAA0D,0BAA0B,CAAC,CAAA;AACrF,0BAAwB,qBAAqB,CAAC,CAAA;AAC9C,yBAAsB,oBAAoB,CAAC,CAAA;AAI3C;;;GAGG;AACU,sCAA8B,GAA2C,EAAE,CAAC;AAEzF;;GAEG;AACU,gCAAwB,GACjC,CAAC,EAAC,OAAO,EAAE,cAAG,EAAE,QAAQ,EAAE,qBAAS,EAAC,CAAC,CAAC;AAE1C;;GAEG;AACU,8BAAsB,GAAG,4BAAqB,CACvD,8BAAmB,EAAE,gBAAgB,EAAE,gEAA2C,CAAC,CAAC;AAExF;;GAEG;AACU,8BAAsB,GAAG,8BAAsB,CAAC;AAE7D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA6EG;AACH,8EAA8E;AAC9E,mBACI,gBAAiC,EACjC,eAAwD;IAC1D,IAAI,eAAgC,CAAC;IACrC,IAAI,YAAY,GAAU,EAAE,CAAC;IAC7B,IAAI,eAAe,GAAU,EAAE,CAAC;IAChC,IAAI,mBAAmB,GAAa,EAAE,CAAC;IACvC,IAAM,uBAAuB,GAAG,wDAA6C,CAAC,eAAe,CAAC,CAAC;IAC/F,YAAY,GAAG,uBAAuB,CAAC,kBAAkB,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;IAC/E,eAAe,GAAG,uBAAuB,CAAC,eAAe,CAAC;IAC1D,mBAAmB,GAAG,uBAAuB,CAAC,mBAAmB,CAAC;IAClE;QAAA;QAYF,CAAC;QAXC,kBAAkB;QACb,wBAAU,GAA0B;YAC3C,EAAE,IAAI,EAAE,eAAQ,EAAE,IAAI,EAAE,CAAC;wBACrB,SAAS,EAAE,eAAe;wBAC1B,YAAY,EAAE,YAAY,CAAC,MAAM,CAAC,CAAC,gBAAgB,CAAC,CAAC;wBACrD,OAAO,EAAE,CAAC,gCAAa,CAAC;wBACxB,eAAe,EAAE,eAAe;wBAChC,SAAS,EAAE,CAAC,gBAAgB,CAAC;wBAC7B,OAAO,EAAE,CAAC,6BAAsB,CAAC;qBAClC,EAAG,EAAE;SACP,CAAC;QACF,oBAAC;IAAD,CAAC,AAZC,IAYD;IAEC,MAAM,CAAC,8BAAsB,EAAE;SAC1B,eAAe,CAAC,aAAa,EAAE,eAAe,CAAC;SAC/C,IAAI,CAAC,UAAC,SAAS;QACd,IAAM,OAAO,GAAG,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,sBAAO,CAAC,CAAC;QAChD,mBAAmB,CAAC,OAAO,CAAC,UAAC,GAAG,IAAK,OAAA,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,EAAjB,CAAiB,CAAC,CAAC;QACxD,IAAM,MAAM,GAAmB,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,qBAAc,CAAC,CAAC;QACtE,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;IAC9B,CAAC,CAAC,CAAC;AACT,CAAC;AAjCe,iBAAS,YAiCxB,CAAA;AAED;;;;GAIG;AACH,2BACI,eAAuB,EACvB,eAA4D;IAA5D,+BAA4D,GAA5D,oBAA4D;IAC9D,kDAAkD;IAClD,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,mCAAgB,CAAC,CAAC;YACC,OAAO,EAAE,gCAAa;YACtB,QAAQ,EAAE,eAAe;SAC1B,CAAC,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;AACvE,CAAC;AARe,yBAAiB,oBAQhC,CAAA;AAED;;GAEG;AACU,gCAAwB,GACjC,4BAAqB,CAAC,8BAAmB,EAAE,kBAAkB,EAAE,CAAC;QACxC,OAAO,EAAE,uBAAgB;QACzB,QAAQ,EAAE,EAAC,SAAS,EAAE,CAAC,EAAC,OAAO,EAAE,cAAG,EAAE,QAAQ,EAAE,kBAAO,EAAC,CAAC,EAAC;QAC1D,KAAK,EAAE,IAAI;KACZ,CAAC,CAAC,CAAC;AAE9B;;GAEG;AACU,gCAAwB,GAAG,gCAAwB,CAAC;AAEjE;;;;GAIG;AACH,4BACI,gBAAiC,EACjC,eAAwD;IAC1D,OAAO,CAAC,IAAI,CACR,oKAAoK,CAAC,CAAC;IAE1K,IAAM,uBAAuB,GAAG,wDAA6C,CAAC,eAAe,CAAC,CAAC;IAC/F,IAAM,YAAY,GAAG,CAAC,uBAAuB,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;IAC7F;QAAA;QAUF,CAAC;QATC,kBAAkB;QACb,wBAAU,GAA0B;YAC3C,EAAE,IAAI,EAAE,eAAQ,EAAE,IAAI,EAAE,CAAC;wBACrB,SAAS,EAAE,eAAe;wBAC1B,YAAY,EAAE,YAAY;wBAC1B,OAAO,EAAE,CAAC,kCAAe,CAAC;wBAC1B,SAAS,EAAE,CAAC,gBAAgB,CAAC;qBAC9B,EAAG,EAAE;SACP,CAAC;QACF,oBAAC;IAAD,CAAC,AAVC,IAUD;IAEC,MAAM,CAAC,gCAAwB,EAAE;SAC5B,eAAe,CAAC,aAAa,EAAE,uBAAuB,CAAC,eAAe,CAAC;SACvE,IAAI,CAAC,UAAC,SAAS;QACd,IAAM,OAAO,GAAG,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,sBAAO,CAAC,CAAC;QAChD,uBAAuB,CAAC,mBAAmB,CAAC,OAAO,CAAC,UAAC,GAAG,IAAK,OAAA,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,EAAjB,CAAiB,CAAC,CAAC;QAChF,IAAM,MAAM,GAAmB,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,qBAAc,CAAC,CAAC;QACtE,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;IAC9B,CAAC,CAAC,CAAC;AACT,CAAC;AA5Be,0BAAkB,qBA4BjC,CAAA;AAED,wBAAwB,GAAU;IAChC,MAAM,CAAC,GAAG,GAAG,GAAG,GAAG,EAAE,CAAC;AACxB,CAAC","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {XHR, analyzeAppProvidersForDeprecatedConfiguration, platformCoreDynamic} from '@angular/compiler';\nimport {ApplicationRef, COMPILER_OPTIONS, CUSTOM_ELEMENTS_SCHEMA, Compiler, CompilerFactory, CompilerOptions, ComponentRef, ComponentResolver, ExceptionHandler, NgModule, NgModuleRef, OpaqueToken, PLATFORM_DIRECTIVES, PLATFORM_INITIALIZER, PLATFORM_PIPES, PlatformRef, ReflectiveInjector, SchemaMetadata, Type, assertPlatform, createPlatform, createPlatformFactory, getPlatform, isDevMode} from '@angular/core';\nimport {BROWSER_PLATFORM_PROVIDERS, BrowserModule, WORKER_APP_PLATFORM_PROVIDERS, WORKER_SCRIPT, WorkerAppModule, platformBrowser, platformWorkerApp, platformWorkerUi} from '@angular/platform-browser';\n\nimport {Console} from './core_private';\nimport {ConcreteType, isPresent, stringify} from './src/facade/lang';\nimport {INTERNAL_BROWSER_DYNAMIC_PLATFORM_PROVIDERS} from './src/platform_providers';\nimport {CachedXHR} from './src/xhr/xhr_cache';\nimport {XHRImpl} from './src/xhr/xhr_impl';\n\n\n\n/**\n * @deprecated The compiler providers are already included in the {@link CompilerFactory} that is\n * contained the {@link browserDynamicPlatform}()`.\n */\nexport const BROWSER_APP_COMPILER_PROVIDERS: Array<any /*Type | Provider | any[]*/> = [];\n\n/**\n * @experimental\n */\nexport const CACHED_TEMPLATE_PROVIDER: Array<any /*Type | Provider | any[]*/> =\n    [{provide: XHR, useClass: CachedXHR}];\n\n/**\n * @experimental API related to bootstrapping are still under review.\n */\nexport const platformBrowserDynamic = createPlatformFactory(\n    platformCoreDynamic, 'browserDynamic', INTERNAL_BROWSER_DYNAMIC_PLATFORM_PROVIDERS);\n\n/**\n * @deprecated Use {@link platformBrowserDynamic} instead\n */\nexport const browserDynamicPlatform = platformBrowserDynamic;\n\n/**\n * Bootstrapping for Angular applications.\n *\n * You instantiate an Angular application by explicitly specifying a component to use\n * as the root component for your application via the `bootstrap()` method.\n *\n * ## Simple Example\n *\n * Assuming this `index.html`:\n *\n * ```html\n * <html>\n *   <!-- load Angular script tags here. -->\n *   <body>\n *     <my-app>loading...</my-app>\n *   </body>\n * </html>\n * ```\n *\n * An application is bootstrapped inside an existing browser DOM, typically `index.html`.\n * Unlike Angular 1, Angular 2 does not compile/process providers in `index.html`. This is\n * mainly for security reasons, as well as architectural changes in Angular 2. This means\n * that `index.html` can safely be processed using server-side technologies such as\n * providers. Bindings can thus use double-curly `{{ syntax }}` without collision from\n * Angular 2 component double-curly `{{ syntax }}`.\n *\n * We can use this script code:\n *\n * {@example core/ts/bootstrap/bootstrap.ts region='bootstrap'}\n *\n * When the app developer invokes `bootstrap()` with the root component `MyApp` as its\n * argument, Angular performs the following tasks:\n *\n *  1. It uses the component's `selector` property to locate the DOM element which needs\n *     to be upgraded into the angular component.\n *  2. It creates a new child injector (from the platform injector). Optionally, you can\n *     also override the injector configuration for an app by invoking `bootstrap` with the\n *     `componentInjectableBindings` argument.\n *  3. It creates a new `Zone` and connects it to the angular application's change detection\n *     domain instance.\n *  4. It creates an emulated or shadow DOM on the selected component's host element and loads the\n *     template into it.\n *  5. It instantiates the specified component.\n *  6. Finally, Angular performs change detection to apply the initial data providers for the\n *     application.\n *\n *\n * ## Bootstrapping Multiple Applications\n *\n * When working within a browser window, there are many singleton resources: cookies, title,\n * location, and others. Angular services that represent these resources must likewise be\n * shared across all Angular applications that occupy the same browser window. For this\n * reason, Angular creates exactly one global platform object which stores all shared\n * services, and each angular application injector has the platform injector as its parent.\n *\n * Each application has its own private injector as well. When there are multiple\n * applications on a page, Angular treats each application injector's services as private\n * to that application.\n *\n * ## API (version 1)\n *\n * - `appComponentType`: The root component which should act as the application. This is\n *   a reference to a `Type` which is annotated with `@Component(...)`.\n * - `customProviders`: An additional set of providers that can be added to the\n *   app injector to override default injection behavior.\n *\n * ## API (version 2)\n * - `appComponentType`: The root component which should act as the application. This is\n *   a reference to a `Type` which is annotated with `@Component(...)`.\n * - `providers`, `declarations`, `imports`, `entryComponents`: Defines the properties\n *   of the dynamically created module that is used to bootstrap the module.\n * - to configure the compiler, use the `compilerOptions` parameter.\n *\n * Returns a `Promise` of {@link ComponentRef}.\n *\n * @deprecated This api cannot be used with the offline compiler. Use\n * `PlatformRef.boostrapModule()` instead.\n */\n// Note: We are using typescript overloads here to have 2 function signatures!\nexport function bootstrap<C>(\n    appComponentType: ConcreteType<C>,\n    customProviders?: Array<any /*Type | Provider | any[]*/>): Promise<ComponentRef<C>> {\n  let compilerOptions: CompilerOptions;\n  let declarations: any[] = [];\n  let entryComponents: any[] = [];\n  let deprecationMessages: string[] = [];\n  const deprecatedConfiguration = analyzeAppProvidersForDeprecatedConfiguration(customProviders);\n  declarations = deprecatedConfiguration.moduleDeclarations.concat(declarations);\n  compilerOptions = deprecatedConfiguration.compilerOptions;\n  deprecationMessages = deprecatedConfiguration.deprecationMessages;\n  class DynamicModule {\n  /** @nocollapse */\nstatic decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n    providers: customProviders,\n    declarations: declarations.concat([appComponentType]),\n    imports: [BrowserModule],\n    entryComponents: entryComponents,\n    bootstrap: [appComponentType],\n    schemas: [CUSTOM_ELEMENTS_SCHEMA]\n  }, ] },\n];\n}\n\n  return platformBrowserDynamic()\n      .bootstrapModule(DynamicModule, compilerOptions)\n      .then((moduleRef) => {\n        const console = moduleRef.injector.get(Console);\n        deprecationMessages.forEach((msg) => console.warn(msg));\n        const appRef: ApplicationRef = moduleRef.injector.get(ApplicationRef);\n        return appRef.components[0];\n      });\n}\n\n/**\n * Bootstraps the worker ui.\n *\n * @experimental\n */\nexport function bootstrapWorkerUi(\n    workerScriptUri: string,\n    customProviders: Array<any /*Type | Provider | any[]*/> = []): Promise<PlatformRef> {\n  // For now, just creates the worker ui platform...\n  return Promise.resolve(platformWorkerUi([{\n                                            provide: WORKER_SCRIPT,\n                                            useValue: workerScriptUri,\n                                          }].concat(customProviders)));\n}\n\n/**\n * @experimental API related to bootstrapping are still under review.\n */\nexport const platformWorkerAppDynamic =\n    createPlatformFactory(platformCoreDynamic, 'workerAppDynamic', [{\n                            provide: COMPILER_OPTIONS,\n                            useValue: {providers: [{provide: XHR, useClass: XHRImpl}]},\n                            multi: true\n                          }]);\n\n/**\n * @deprecated Use {@link platformWorkerAppDynamic} instead\n */\nexport const workerAppDynamicPlatform = platformWorkerAppDynamic;\n\n/**\n * @deprecated Create an {@link NgModule} that includes the {@link WorkerAppModule} and use {@link\n * bootstrapModule}\n * with the {@link workerAppDynamicPlatform}() instead.\n */\nexport function bootstrapWorkerApp<T>(\n    appComponentType: ConcreteType<T>,\n    customProviders?: Array<any /*Type | Provider | any[]*/>): Promise<ComponentRef<T>> {\n  console.warn(\n      'bootstrapWorkerApp is deprecated. Create an @NgModule that includes the `WorkerAppModule` and use `bootstrapModule` with the `workerAppDynamicPlatform()` instead.');\n\n  const deprecatedConfiguration = analyzeAppProvidersForDeprecatedConfiguration(customProviders);\n  const declarations = [deprecatedConfiguration.moduleDeclarations.concat([appComponentType])];\n  class DynamicModule {\n  /** @nocollapse */\nstatic decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n    providers: customProviders,\n    declarations: declarations,\n    imports: [WorkerAppModule],\n    bootstrap: [appComponentType]\n  }, ] },\n];\n}\n\n  return platformWorkerAppDynamic()\n      .bootstrapModule(DynamicModule, deprecatedConfiguration.compilerOptions)\n      .then((moduleRef) => {\n        const console = moduleRef.injector.get(Console);\n        deprecatedConfiguration.deprecationMessages.forEach((msg) => console.warn(msg));\n        const appRef: ApplicationRef = moduleRef.injector.get(ApplicationRef);\n        return appRef.components[0];\n      });\n}\n\nfunction normalizeArray(arr: any[]): any[] {\n  return arr ? arr : [];\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}